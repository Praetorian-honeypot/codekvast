apply from: "$rootDir/gradle/spring-boot-app.gradle"
apply from: "$rootDir/gradle/spring-boot-jdbc.gradle"
apply from: "$rootDir/gradle/spring-boot-web.gradle"
// apply from: "$rootDir/gradle/kotlin-jdk8.gradle"

description = 'The Codekvast Login server'
applicationName = 'codekvast-login'
archivesBaseName = 'codekvast-login'
version = codekvastVersion
group = 'crisp'
mainClassName = 'io.codekvast.login.CodekvastLoginApplication'

dependencies {
    // Regular dependencies
    compile 'org.springframework.boot:spring-boot-starter-thymeleaf'
    compile 'io.jsonwebtoken:jjwt:0.9.0'
}

run {
    group "Backend Development"
    dependsOn ":product:dashboard:startMariadb"

    jvmArgs = [
        '-ea',
    ]

    args = ["--logging.file=$buildDir/log/${applicationName}.log"]
}

bootRun {
    group "Backend Development"
    dependsOn ":product:dashboard:startMariadb"

    jvmArgs = run.jvmArgs
    args = run.args
    addResources = true
}

//--- Packaging ------------------------------------------------------------------------------------------------------------------
springBoot {
    executable = true
    embeddedLaunchScriptProperties = [
        'initInfoProvides'        : applicationName,
        'initInfoShortDescription': 'Codekvast Login',
        'initInfoDescription'     : 'Codekvast Login handles logins',
    ]
    excludeDevtools = true
}
