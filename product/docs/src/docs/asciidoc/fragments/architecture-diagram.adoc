[ditaa, "architecture-diagram"]
.Architecture Diagram
....
+------------------------------------------------------------------------------+         +-------------------------+
| Host_1                                                                       |         | Host_n                  |
|                                                                              |         |                         |
|   +-------------------------+            +-------------------------+         |         |  +-=-----------------+  |
|   | JVM 1                   |            | JVM m                   |         |         |  | One or more JVMs  |  |
|   | +---------------------+ |            | +---------------------+ |         |         |  |                   |  |
|   | | Your app_1          | |            | | Your app_m          | |         |         |  |                   |  |
|   | |                     | |            | |                     | |         |         |  |                   |  |
|   | +---------------------+ |            | +---------------------+ |         |         |  |                   |  |
|   |            |            |            |            |            |         |         |  |                   |  |
|   |            v            |            |            V            |         |         |  |                   |  |
|   | +---------------------+ |            | +---------------------+ |         |         |  |                   |  |
|   | | aspectjweaver       | | -=-------- | | aspectjweaver       | |         |         |  |                   |  |
|   | +---------------------+ |            | +---------------------+ |         |         |  |                   |  |
|   |            |            |            |            |            |         |         |  |                   |  |
|   |            V            |            |            V            |         |  -=---- |  |                   |  |
|   | +---------------------+ |            | +---------------------+ |         |         |  |                   |  |
|   | | Codekvast collector | |            | | Codekvast collector | |         |         |  |                   |  |
|   | +----------+----------+ |            | +----------+----------+ |         |         |  |                   |  |
|   |            |            |            |            |            |         |         |  |                   |  |
|   +------------|------------+            +------------|------------+         |         |  +-------------------+  |
|                | file I/O                             |                      |         |                         |
|                V                                      V                      |         |                         |
|     +----------------------+               +----------------------+          |         |                         |
|     | /tmp/codekvast/app_1/|               | /tmp/codekvast/app_m/|          |         |                         |
|     | invocations.dat      | -=----------- | invocations.dat      |          |         |                         |
|     |                      |               |                      |          |         |                         |
|     | {d}                  |               | {d}                  |          |         |                         |
|     +----------------------+               +----------------------+          |         |                         |
|                | file I/O                             |                      |         |                         |
|                \------------\       /-----------------/                      |         |                         |
|                             |       |                                        |         |                         |
|                             v       v               /-=-custom classloader   |         |                         |
|                     +----------------------------+  |  /------------\        |         |  +--------------------+ |
|                     | Codekvast agent 1          |  v  |app_1       |--\     |         |  | Codekvast agent n  | |
|                     |                            |<----|            |_m|     |         |  |                    | |
|                     |                            |     |binaries    |  |     |         |  |                    | |
|                     |                            |     \------------/  |     |         |  |                    | |
|                     +-------------+--------------+        -------------/     |         |  +-------+------------+ |
+-----------------------------------|------------------------------------------+         +----------|--------------+
                                    | HTTP POST/JSON                                                |
                                    \------------\             /------------------------------------/
                                                 |             |
                                                 v             v
                                      +--------------------------------+
                                      | Codekvast Server               |
                                      | +----------------------------+ |    +----------+
                                      | | Data warehouse             | |<-->| Embedded |
                                      | +----------------------------+ |    | database |
                                      |                                |    | {s}      |
                                      | +----------------------------+ |    |          |
                                      | | Visualisation layer (web)  | |    +----------+
                                      | +----------------------------+ |
                                      +--------------------------------+
                                                      |
                                                      v
                                                 /---------\
                                                 | HTML5   |
                                                 | browser |
                                                 \---------/

....
